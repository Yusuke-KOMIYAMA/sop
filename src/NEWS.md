# v1.8.0

主な変更点:

* タブレットによる入力時のオートセーブに完全対応しました。（手書き、リトライ含む）
* 手書きデータの複数対応を行いました。（複数対応はsopimage形式の手順書のみ）
* 入力フォームのデータについて手順書のバージョンアップ時には前のデータを引き継ぐようにしました。
* SSOのログアウトの際に統合システムもあわせてログアウトするようにしました。
* Exception/Errorをapacheのエラーログに出力するようにしました。

その他の変更点:

* タブレット入力時に、誤って他のページに移動してしまうことを防ぐための処理を追加しました。
  * 「手順書一覧に戻る」や「homeボタン」などで移動しようとした場合に、確認ダイアログを表示するようにしました。
  * （機能制限）
    ブラウザのリロードやタブを閉じる際の警告はiPadがサポートしていないため実現できませんでした。
    そのため、「ブラウザのリロード、タブを閉じる、戻る」などを行うと、
    確認なしてタブレット入力画面から移動します。
    （オートセーブがあるので入力データが失われることはありません。）
* タブレットによる入力時の保存ボタンについて、オートセーブで不要になったため削除しました。
* タブレット入力時の右下のトグルボタンについて（手書き認識）、正常に動作していないため削除しました。
* 同じページを開いたまま長時間作業されることが予想される以下のページでは、自動ログアウトを無効にするようにしました。
  * SOP管理の入力フォーム設定中。
  * タブレットの実験データ入力中。
* タブレットでのPDF出力について、ブラウザのポップアップブロックが有効の場合でも動作するようにしました。
* シングル・サインオンが有効の時は、ユーザー管理画面においてメールアドレスやユーザー名を非表示にしました。
* システム全般で、データ表示の際にXSSの危険性がありましたので修正しました。
* /sop/tablet/についてjsやcssファイルを開発モードからリリースモードに変更しました。
  （/sop/, /sop_mng/はv1.0.0からリリースモードですので、システム全体でリリースモードに統一されました。）

# v1.7.0

* サイトの色味の調整を行いました。
* ヘッダに統合システムホームへのリンクを追加しました。

# v1.6.0

* 入力フォーム追加機能がテキストエリア・チェックボックスで動作するようになりました。（タブレットでの入力、PDF出力なども対応済です。）
* オートセーブに部分的に対応しました。（ローカルストレージ対応済）
* タブレットのUIの調整を行いました。
  * ログアウトボタンを右上に移動しました。
  * 左下にホームボタンを追加しました。
  * 手順書入力時のアイコンにテキストを追加してわかりやすくしました。
* タブレットにて入力された手書きのデータをPDFの末尾に追加するようにしました。（手書きデータが空の場合は追加しません。）
* タブレットにて仮Fix状態の解除機能を追加しました。（誤って仮Fixしてしまったときに入力中の状態に戻せます。）
* 文面の変更を行いました。
  * チェック者 → 証人
  * Fix ⇒ 作業完了
  * WordHTML ⇒ SOP Image
* Wordを画像化したファイルの拡張子をzipからsopimageへ変更しました。
  （Windowsのアプリもsop-Windows-apps-v0.2.0.zipに更新してください。）
  https://trac.iit.jp/trac.hgc
  ※ zipファイルの中身の形式は変更していませんので、今までのデータも拡張子をリネームすれば使えます。
* SOP管理画面で承認申請をした後に、実際に承認がされる前であれば、承認申請の取り消しが出来るようにしました。
* 管理画面（sop_mng）にて、ユーザーが所属可能なグループを一つに限定しました。


既知の問題点

* 入力フォーム追加の際、テキストエリアをリサイズしようとすると画面にゴミが表示されます。（動作上は問題ありません。今後修正予定です。）
* オートセーブについて手書きデータは未対応です。（今後対応します。）
* オートセーブ失敗時のリトライは未対応です。（今後対応します。）
* PDF出力時のチェックボックスの位置がずれます。（次バージョンで修正します。）

# v1.5.0

* 管理画面（sop_mng）にて、ユーザーアカウントが漏洩する可能性がある作りになっていたため修正しました。
* 管理画面（sop_mng）へは管理権限を持つアカウントのみがログインできるようにしました。
* 管理画面（sop_mng）のアカウント管理で管理権限の有無を設定できるようにしました。
* シングル・サインオンに対応しました。
* シングル・サインオンが有効な場合、管理画面（sop_mng）のアカウント管理ではパスワードを管理しないようにしました。
* 標準手順書登録時に、入力チェック者の要不要を設定できるようにしました。
* タブレット入力にて、入力チェック者が不要な手順書は入力チェックの処理をスキップするようにしました。
* システム全般で、エラーメッセージの表示の際にXSSの危険性がありましたので修正しました。

# v1.4.0

* タブレット入力時のFixボタンの動作を「入力チェック者による入力待ちの状態にする」ように変更しました。
* タブレットにて「入力チェック待ち一覧」の画面を追加しました。（そのまま入力チェック→Fixまで可能です。）
* 自分が入力チェック担当の手順書がある場合、タブレットでログインした際にアラートを表示するようにしました。
* 手順書登録において、「入力フォーム追加」の画面を仮に追加しました。[[BR]]
  （機能実装はまだ途中ですので動作はしません。テンプレートアップロード後は、「入力フォーム追加」をスキップして「承認可能にする」操作を行って下さい。）

# v1.3.0

* 手順書登録において、入力フォーム設定中の状態を追加しました。（手順書をアップロードした後、右クリックメニューから「承認可能にする」操作を行うまでは未承認一覧に表示されません。）
* ブラウザでリロードを行った際もサインイン状態を保持するように変更しました。
* SOPシステムへのログイン時にIDやパスワード入力欄でリターンキーを有効にしました。（タブレット除く）
* SOP管理画面（ユーザやグループの管理画面）に認証機能を追加しました。（今のところ、全てのユーザでログインできますが、管理者権限を追加する予定です。）
* フッターを追加しました。

# v1.2.0

* DBに保存されているユーザーのパスワードの形式を強度が高いものに変更しました。
* 画像zipのアップロードに対応しました。
* アップロードされた画像zipのプレビューに対応しました。
* アップロードされた画像zipのHTML形式でのダウンロードに対応しました。
* アップロードされた画像zipをタブレットから閲覧できるようにしました。
* アップロードされた画像zipのPDF化に対応しました。
* タブレット入力時の認証を削除し、入力チェック者のIDを選択させるように変更しました。
  以下の項目はまだ未対応です。
  * 画像zipアップロード時に、認証の要不要を指定する。
  * 実験再開時の初期値を前回のIDにする。
  * Fix時の認証を削除する。

# v1.0.0

行った作業:

* 動作環境をWindowsからLinuxに変更する
* DBをsqliteからMySQLに変更する
* Sencha ExtJSをGPL v3版に変更する
* jsやcssファイルを開発モードからリリースモードに変更する（/sop/）
* タブレット閲覧・入力システムでログアウトのホームアイコンをわかりやすい形に変更する。（アイコンから「Logout」という文字列に変更しました。）
* SOP登録システムのログインパネルにシステムバージョンを表示するようにしました。（バージョン1.0.0）
